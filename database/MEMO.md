RDBは一貫性(トランザクション)を保つことが得意 一貫性を保ちたければ、DBを使えばよい

ESは検索に最適化されている。RDBから考えると冗長なデータがあったりするが、ESの役割から考えると正しい。

実行計画 EXPLAIN select * from ...

# countのようにインデックスを張るには向いていないカラムで高速に検索したいとき

一時テーブルを作成する。countが10個以下みたいな条件で一時テーブルを作成して、そこから検索をかけるようにする

# 一時テーブルを作成する

TRUNCATE 条件絞れない。履歴ログも残さない(早いけど、ROLLBACKできない) RDBはトランザクションを守るために履歴ログを残す。
DELETEは履歴ログを残す。 -> ROLLBACKができる
